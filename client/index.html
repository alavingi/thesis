<!DOCTYPE html>
<!-- Code partially based on the pattern given in Frank W. Zammetti's book -->

<html>
  <head>

    <meta name="viewport" content="width=device-width,initial-scale=1">

    <!-- <link rel="stylesheet" href="jq/jquery.mobile-1.3.1.min.css"> -->
    
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css" />
	<link rel="stylesheet" href="styles.css">
	<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
	<script type="text/javascript" src="client.js"></script>
	<script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>

    <!-- <script type="text/javascript" src="jq/jquery-1.9.1.min.js"></script> -->
    <!-- Note: main.js must come before JQM to set defaults properly. -->
    
    <!-- <script type="text/javascript" src="jq/jquery.mobile-1.3.1.min.js"></script> -->
  	
  </head>
  <body>


    <!-- ================================================================== -->
    <!-- HOME PAGE                                                          -->
    <!-- ================================================================== -->
    <div data-role="page" id="homePage" >
  	
	<script type="text/javascript">
  	var width = (window.innerWidth > 0) ? window.innerWidth : screen.width;
	if (width <= 640) {
  		deviceType = "phone";
  	}
  	else if (width > 1040) {
  		deviceType = "desktop";
  	}
  	else {
  		deviceType = "tablet";
  	} 
	  alert(width); 
      $(document).on("pageshow", "#homePage", function(e) { 
	  	
	    displayDate();
		displayData();
		if (deviceType == "tablet" || deviceType == "desktop") {
			updateList('topLeadsUL', 'lead', deviceType);
			updateList('upcomingMeetingsUL', 'meeting', deviceType);
		}
		
      });
	  
  	  function displayDate() {
		  
  		var d = new Date();
		if (deviceType == "phone") {
			document.getElementById("dateAndTime").innerHTML = "Today is : " + d.toDateString();
		}
		else {
			document.getElementById("dateAndTime").innerHTML = "Today is : " + d.toString();
		}
  		
  	  }
  	  function displayData() {
		  
  		var leads = copyToMemory("lead");
  		var opportunities = copyToMemory("opportunity");
		
		document.getElementById("counts").innerHTML="Total no. of \<a href='javascript:displayListView(\"lead\");' data-role='button'>Leads\</a> is " + count.lead
		 + " Total no. of \<a href='javascript:displayListView(\"opportunity\");' data-role='button'>Opportunities\</a> is " + count.opportunity;
		         
  	  }
  	</script>	
      <!-- About panel. -->
      <div data-role="panel" data-position="right" data-display="overlay" data-theme="b"
        id="aboutPanel">
        <h2>Contact Manager</h2>
        <br>
	    <div class="cssHomeAboutSection">Navbar icons from</div>
	    <a href="http://www.glyphish.com">Glyphish</a><br>
	   <ul data-role="listview" data-inset="true"  data-theme="b"
          id="settingsUL">
	   <li>Settings
	       <ul data-display="overlay">
	         <li>Options
	            <ul>
	               <!-- <li><a href="index.html">Canary</a></li> -->
			        <li><button data-icon="alert" data-theme="b"
			          onClick="$.mobile.changePage('#confirmClear');">Clear Data</button> </li>                      
	            </ul>
			</ul>
	    </li>	  
        
       <!--  <button data-icon="edit" data-theme="b"
          onClick="setGlobalTheme('e')">Change Theme</button> -->
	  </ul>	   
      </div>

      <!-- Header. -->
      <div data-role="header" data-position="fixed" class="header">
        <div class="ui-loader-background"></div>
		
        
		<img border="0" src="img/logo.png" alt="Logo" class="headerLogo"/>  
        <button class="cssHomeButton" id="indexHomeButton" data-icon="home"
          disabled="disabled">Home</button>
		<h1 class="heading">Contact Manager!</h1>
		
        <a href="#aboutPanel" class="cssFunctionButton" data-icon="bars"
          data-theme="b">About</a>
	  	<br>
	  	<div id="dateAndTime" class="headerDate"></div>
      </div>

      <!-- Page content. -->
      <div data-role="content" data-theme="b">
        <div>
        <img src="img/logo.png" class="cssHomeTitleHeader"></div>
		<div id="counts" data-theme="e" class="cssHomeCounts"></div><br><br>
		<div data-role="controlgroup" data-type="horizontal" class="cssHomeMenu">
		   
		       <a href="javascript:displayListView('contact');" data-role='button' data-mini="true">List Contacts</a>
		       <a href="javascript:newItem('contact');" data-role='button' data-mini="true">New Contact</a>
		       <a href="javascript:displayListView('account');" data-role='button' data-mini="true">List Accounts</a>
		       <a href="javascript:newItem('account');" data-role='button' data-mini="true">New Account</a>
		   
		</div>
		<div class="cssHomeMenuTablet" style="width:80%;margin-left:auto;margin-right:auto;">
		    <div data-role="controlgroup" data-type="horizontal" style="marging-left:auto;margin-right:auto;">
		       <a href="javascript:displayListView('contact');" data-role='button'>List Contacts</a>
		       <a href="javascript:newItem('contact');" data-role='button'>New Contact</a>
		       <a href="javascript:displayListView('account');" data-role='button'>List Accounts</a>
		       <a href="javascript:newItem('account');" data-role='button'>New Account</a>
		    </div>
			   <br>
			   <br>
			   <br>
			   <br>
			   <ul data-role="listview" data-inset="true"
	             id="topLeadsUL"></ul>
			   <br>
			   <br>	 
	           <ul data-role="listview" data-inset="true"
	             id="upcomingMeetingsUL"></ul>
		  </div> 
		
      </div>

      <!-- Footer. -->
      <div data-role="footer" data-position="fixed" data-theme="b">
        <div class="ui-loader-background"></div>
        <div data-role="navbar" class="cssNavBar">
          <ul>
            <li><a href="accountPage.html" class="linkAccountPage" title="Account Page"
              data-icon="custom" data-prefetch="true"
              data-iconpos="notext"></a></li>
            <li><a href="contactPage.html" class="linkContactPage" title="Contact Page"
              data-icon="custom" data-prefetch="true"
              data-iconpos="notext"></a></li>
            <li><a href="opportunityPage.html" class="linkOpportunityPage" title="Opportunity Page"
              data-icon="custom" data-prefetch="true"
              data-iconpos="notext"></a></li>
            <li><a href="leadPage.html" class="linkLeadPage" title="Lead Page"
              data-icon="custom" data-prefetch="true"
              data-iconpos="notext"></a></li>
            <li><a href="meetingPage.html" class="linkMeetingPage" title="Meeting Page"
              data-icon="custom" data-prefetch="true"
              data-iconpos="notext"></a></li>
            <li><a href="callPage.html" class="linkCallPage" title="Call Page"
              data-icon="custom" data-prefetch="true"
              data-iconpos="notext"></a></li>  
          </ul>
        </div>
      </div>

    </div>


    <!-- ================================================================== -->
    <!-- INFO DIALOG                                                        -->
    <!-- ================================================================== -->
    <div data-role="dialog" id="infoDialog" data-backbtn="false" data-close-btn="none">
      <div data-role="header">
        <h1 id="infoDialogHeader"></h1>
      </div>
      <div data-role="content" id="infoDialogContent"></div>
      <div data-role="footer" class="cssInfoDialogButtons">
        <a href="javascript:void(0);" data-rel="back" data-role="button">Ok</a>
      </div>
    </div>


    <!-- ================================================================== -->
    <!-- CONFIRM DIALOG                                                     -->
    <!-- ================================================================== -->
    <div data-role="dialog" id="confirmClear">
      <div data-role="content">
        <p>Are you sure ?</p>
        <a href="#" id="confirmClearYes" data-role="button" data-theme="b"
          data-rel="back">Yes</a>
        <a href="#" data-role="button" data-theme="c" data-rel="back">No</a>
      </div>
    </div>


  </body>
</html>
